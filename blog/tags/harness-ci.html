<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">3 posts tagged with &quot;harness-ci&quot; | Harness ❤️ Open Source</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://harness-community.github.io/img/logo.svg"><meta data-rh="true" name="twitter:image" content="https://harness-community.github.io/img/logo.svg"><meta data-rh="true" property="og:url" content="https://harness-community.github.io/blog/tags/harness-ci"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="3 posts tagged with &quot;harness-ci&quot; | Harness ❤️ Open Source"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://harness-community.github.io/blog/tags/harness-ci"><link data-rh="true" rel="alternate" href="https://harness-community.github.io/blog/tags/harness-ci" hreflang="en"><link data-rh="true" rel="alternate" href="https://harness-community.github.io/blog/tags/harness-ci" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Harness ❤️ Open Source RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Harness ❤️ Open Source Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e4011e4a.css">
<link rel="preload" href="/assets/js/runtime~main.37462c87.js" as="script">
<link rel="preload" href="/assets/js/main.428e0575.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Harness Community Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Harness Community Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Harness Community</b></a><a class="navbar__item navbar__link" href="/docs/intro">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/harness-community/harness-community.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/05/WORLD-WITHOUT-FEATURE-FLAGS/World-Without-Feature-Flags">World without Feature Flags</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/28/Introduction-to-Feature-Flag/Intro_to_Feature_Flag">Introduction to Feature Flags</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/maven-testing-in-harness-ci">Using Harness CI for Maven Testing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ccm-active-cloud-cost-solution">Harness Cloud Cost Management - an active cloud cost solution</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/python-yaml-onboarding">Python Yaml Onboarding for beginners</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>3 posts tagged with &quot;harness-ci&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/configure-run-step">Configure Run Step in Harness CI</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-20T00:00:00.000Z" itemprop="datePublished">October 20, 2022</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://media-exp1.licdn.com/dms/image/C5603AQFvCMGToV9LMQ/profile-displayphoto-shrink_800_800/0/1631719718974?e=1670457600&amp;v=beta&amp;t=vWbeVBiAvAYLTdxYcAnIqzuvveJ8IWleCDV0A5Fdbp0" alt="Dhrubajyoti Chakraborty"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dhrubajyoti Chakraborty</span></a></div><small class="avatar__subtitle" itemprop="description">Community Engineering Intern, Harness</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>This beginner guide aims to help learners learn the configuration management for run steps settings in Harness CI. We will learn about different settings and permissions for the Harness CI Run Tests step which executes one or more tests on a container image.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-we-begin">Before We Begin<a class="hash-link" href="#before-we-begin" title="Direct link to heading">​</a></h3><p>Are you confused with terminologies like Container Resources, Image Pull Policy etc while creating &amp; configuring a run step for your CI pipeline? In this article we will discuss a few such terminologies on the Harness CI platform and how you can configure them to set up your run step in the pipeline settings according to your requirements.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-parameters-in-a-run-step">Configuration Parameters in a Run Step<a class="hash-link" href="#configuration-parameters-in-a-run-step" title="Direct link to heading">​</a></h3><ul><li>Name</li><li>ID</li><li>Description</li><li>Container Registry</li><li>Image</li><li>Namespaces</li><li>Build Tool</li><li>Language</li><li>Packages</li><li>Run Only Selected Tests</li><li>Test Annotations</li><li>Pre-Command &amp; Post-Command</li><li>Report Paths &amp; Environment Variables</li><li>Output variables</li><li>Image Pull Policy</li><li>Container Resources</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name">Name<a class="hash-link" href="#name" title="Direct link to heading">​</a></h3><p>The unique name for the run step. Each run step must have a unique name &amp; it is recommended to use a name which describes the step.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id">ID<a class="hash-link" href="#id" title="Direct link to heading">​</a></h3><p>Most of the Harness entities and resources include a unique Id also referred as entity Identifier that&#x27;s not modifiable once the entity is created. It provides a constant way to refer to an entity and avoid issues that can arise when a name is changed.</p><p>Initially Harness automatically generates an identifier for an entity which can be modified when you are creating the entity but not after the entity is saved.</p><p>Even if you rename the entity the Identifier remains the same. The automatically generated Identifier is based on the entity name and follows the identifier naming conventions.
If an entity name cannot be used because it&#x27;s already occupied by another entity Harness automatically adds a prefix in the form of <code>-1</code>, <code>-2</code>, etc.</p><p><strong><a href="https://ngdocs.harness.io/article/li0my8tcz3-entity-identifier-reference" target="_blank" rel="noopener noreferrer">Check out the documentation to know more about Entity Identifier Reference</a></strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="description">Description<a class="hash-link" href="#description" title="Direct link to heading">​</a></h3><p>This is generally a text string describing the run step and it’s working.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="container-registry">Container Registry<a class="hash-link" href="#container-registry" title="Direct link to heading">​</a></h3><p>Container Registry refers to the Harness Connector for a container registry. This is the container registry for the image Harness will use run build commands on such as DockerHub.</p><p><strong><a href="https://docs.harness.io/article/my8n93rxnw-connect-to-harness-container-image-registry-using-docker-connector" target="_blank" rel="noopener noreferrer">Check out the documentation to know more about Harness Container Image Registry</a></strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="image">Image<a class="hash-link" href="#image" title="Direct link to heading">​</a></h3><p>Image is the name of the Docker image to use when running commands.For example: <code>alpine-node</code>
This image name should include the tag and will by default refer to the latest tag if not specified. You can use any docker image from any docker registry including docker images from private registries.</p><p><strong>Different container registries has different name formats:</strong></p><ul><li>Docker Registry: enter the name of the artifact you want to deploy, such as <code>library/tomcat</code>. Wildcards are not supported.</li><li>GCR: enter the name of the artifact you want to deploy. Images in repos need to reference a path starting with the project ID that the artifact is in, for example: <code>us.gcr.io/playground-243019/quickstart-image:latest</code>.</li><li>ECR: enter the name of the artifact you want to deploy. Images in repos need to reference a path, for example: <code>40000005317.dkr.ecr.us-east-1.amazonaws.com/todolist:0.2</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="namespaces-c">Namespaces (C#)<a class="hash-link" href="#namespaces-c" title="Direct link to heading">​</a></h3><p>A comma-separated list of the Namespace prefixes that you want to test.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-tool">Build Tool<a class="hash-link" href="#build-tool" title="Direct link to heading">​</a></h3><p>This is where you select the build automation tool &amp; the source code language to build, such as Java or C#.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="packages">Packages<a class="hash-link" href="#packages" title="Direct link to heading">​</a></h3><p>This are the list of source code package prefixes separated by a comma. For example: <code>com.company.</code>, <code>io.company.migrations</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-only-selected-tests">Run Only Selected Tests<a class="hash-link" href="#run-only-selected-tests" title="Direct link to heading">​</a></h3><p>If this option is unchecked, Test Intelligence is disabled and all tests will run.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-annotations">Test Annotations<a class="hash-link" href="#test-annotations" title="Direct link to heading">​</a></h3><p>This is where you enter the list of test annotations used in unit testing separated by commas.
Any method annotated with this will be treated as a test method. The defaults are: <code>org.junit.Test</code>, <code>org.junit.jupiter.api.Test</code>, <code>org.testng.annotations.Test</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-command--post-command">Pre-Command &amp; Post-Command<a class="hash-link" href="#pre-command--post-command" title="Direct link to heading">​</a></h3><p>In pre-command you enter the commands for setting up the environment before running the tests. For example, printenv prints all or part of the environment.</p><p>In post-command you enter the commands used for cleaning up the environment after running the tests. For example, sleep <code>600</code> suspends the process for 600 seconds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="report-paths">Report Paths<a class="hash-link" href="#report-paths" title="Direct link to heading">​</a></h3><p>This refers to the path to the file(s) that store results in the JUnit XML format. You can enter multiple paths. Glob is supported.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variables--output-variables">Environment Variables &amp; Output Variables<a class="hash-link" href="#environment-variables--output-variables" title="Direct link to heading">​</a></h3><p>Environment variables refers to the variables passed to the container as environment variables and used in the Commands.</p><p>Output variables expose Environment Variables for use by other steps/stages of the Pipeline. You can reference the output variable of a step using the step ID and the name of the variable in Output Variables.</p><p><img loading="lazy" alt="output-var" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjQAAACLCAIAAAD56pTdAAAAA3NCSVQICAjb4U/gAAAc2UlEQVR4nO3dZ3gU1R4G8P/M9vReSC8ESGhBuiCEqiAgPTTxigUbKKjc6714FQsCCnYD6pUSSDDUQBAVJNIk9JBKIAU3Ib2X3c3uztwPE9cQEkhCSAZ4f08+7J6dM3N28zz77jlz5gzD8zwBAAB0NLVa7ezsLDxmO7YpAAAAN0M4AQCA6CCcAABAdBBOAAAgOggnAAAQHYQTAACIDsIJAABEB+EEAACig3ACAADRQTgBAIDoIJwAAKDDZFc0voSetJ3bAQBwT8grKDl5JjErO09vMHZ0W0SPlZRInWJ1AUVk09KqVgpmgBsbGiQd7iWpX45wAgBoKK+gZNvuQyGDgx8fM1guw/fkbdTqDUmpmXbHj+8yDmlpPlXo+F8zjPlVPBH51RvLw7AeAEBDJ88khgwODu7RGcnUHHKZNLhH5zFDgocr0lq3h0sFXGSSoX4JwgkAoKGs7Lygrj4d3Yp7TFBXHztDQaurx+Vw9Z8inAAAGtIbjOgztZRcJiWu9efnKnQ3zIxAOAEAgOjgp0HH++3k+SuZ2cWlFURkb2sV4OMRMji4oxsFANCREE4dKTu3cP3WaJ6nQX0CBwYHEVFapvrwifO/nTz//JyJ7q6OHd1AAICO0Zpwqq7RnDqXePZiklQq7R8c1C84SKmQt3nLbi3m0PHaWv3kcSH1C7/+Iap/cFDf3oG3rstx3GvL144Y2m/So8Ma3aCopGzT9v0vL5ipkMvql1/NVB86enrh/Kl32HhBdm7hh1+Gjx8xcPzIQabCXoF+08cPj4qJXfdd1GvPTEc+AdxDCovLtu45VL8kwMd93IiBYeHRFZXVb74wq9V7/uNckjq3YMbjIbfftDFaXW1YePS8KWPsba1a3Ya2snyo3FJObx6uvfVmLT7npNXqlv533frNOzmOr67RfvZtxPKPvjEauVtUKSuvnLbgzYKikpYeS7DwjQ8PHzvToJBlmM0/xmi1OlNJWvq1X3+Ps7e7/RR7lmW9PTs52ts2tUFlVc3xuIsGg6FBeW5+0W/HG7ak1cLCo+snU3xy+qWUdOHx9PHDB/YJXL81uq2OBQDtoKKqJi1DzXGcQi4T/uRyGRF1crbv5Gx/J3tOv5YTn5ze6uq6Wn1ahrqqRnMnbWgrA9zYqd2kq0fepkvT4p7Tmq+3VFbVrF/zlq2NFRHl5BUu/veab8N3L5w/lef5pMsZ/j4eQkcqr6DYYDA4OtjFJ6UZjdyFhMuBXXw9OjlfyfjT0d5Wq6tVX8/v4udlZWlORI3Wde/knHolK7+w5MyFJDcXx66dvU3NeGRQnw1bdv9xNiFkSF+h5NDR0472Nj6enYioorI6Lf0aEXXv6qdUKogoN7+I4ziVSpmUmt4vOOjx0UNMMWYwGFOuZFbXaDr7etrbWpsOwXF86pUsvcEQGOAjkdxw6XL9igzDdOvsbdpAq9VdyVTLZNIufl4MwzT1Mf528jwRmZLpwy/DazQ6jVbn4er46jPTiWj6+OHxyemnzicN7BPU0v8RAHSguVPGONnf8Cu5b88uwjITCakZLo52jvY2RFRYUpabX9yjqx/DEM9Txp85xWWV3fw9Lc3NTBVLyipTr17z9ep081GMRi4pLdPPy83cTCmUXEpJ93RztrGy0BsMyWnXqms0Xfw86n+nERHH8YmXMwJ8675pcwuKDQajRycn4dWC4rKMazm+np2cHJr87X6H1oySd3NgiWhqNynRrfpPLQsnnufjk9JefW62kExE5ObiOG/6+J37Dy+cP7Wyqnr5R9989sHrnm4uRBS+44DRaJw/c8IX328norBNOx8bOfi5eVNWfr7RycH28tVrMplUrzfMmfrotAmjGq277JWnwjbtJKK484l5BcWfvr/U1BJzM1Wfnl1/+f2UEE4cx8WePDdj4mgiOnbqwtqwrRIJS0Qsy657b6mbi2PUvkOJKVcLi8uUSsUXAT4rP984eVzIhDFDc3ILXn/3M61WJzRm6QtzhwzoLRzi3Y83ZKmvC4/XvrvE092l/keRlJr+3zXrWZbV6w3WVhafvPuava11lvr6mys+JyKZVMrx/Der/2ljZdnoJ5mWkT2oT93wY1pmdo1G9/4bC4pLK5Z//H12bqEwmtcr0O9icjrCCeBet+vgscqqmn+9NOenI3EFxWWr31pIRGvCIu1srHp28ysrr3r30426Wj3LsjzPLwgd16d7ABF9H3ngXMJlqURiMBqtrSzYG3/sMgxt2Lb/kf49Z0wIIaLktKyw8Oh/vTSnsqpmTVikwWhkWZbjuNCJIx4Z0MtUq7K6Jiw8etmLs73cnIkoYu9hjuNff34mx/ErvwrPySsSDjd8YG9ht20i0IFd1F+WXMS5WzJTutaFTkoRl1PZ+Kp6gpYN6/2Zk2c0cvV7METU1d+7sqqmsqqm0SouTvYbPvkPEX310bLn5k0RCq9mqr9Z/a8fv/1o0TOhW3cezLiW09QRP31/qbWVxXPzJtdPJsHY4YNSr2RVVFYTUXxSml5vGDm0HxFdSLj8xGPDo75bFbH+Qwtzs59/OylsX1JWse69pRFhHzjUG/q7lHy1q79XRNgH2zesfLh/r8g9v5heMlMpt29YGbl+ZfeufivWflv/0Fpd7X/XrJ88LmT7hpXCUYQQ3fvT7472tts3rNzy1YpBfXtcvnqtqfdVUlbh7lr3ayXAx/39NxYQ0ZVMNRGZBoUDfDxKyiqa2gMAiNNvJ87HHP5D+CurqKr/0nNzJmi0ugO//XEwNq66RrtwzkQi+vT7KGtL80/feeWLFYu7d/HZ+ONBnqcLSVfOJVx+asZjn69YtPS5meU37oeIWJbt2c33zKVU4envcfGW5mYenZwSUjNcnOzWvv3SFysW+3u7HTgS15w2R8UcKSgqe2fJPz5fsWjWpJGxpy6qr7f+ctoGLBXMaF/J4v4yobdERBvjDY9Haj87rb9FrZaFk5AEFmaq+oUW5ioiqm7JaOaoRwa4ONkTUciQvvZ21okpV1vUDMFDvbrJZNKjf5wnokNHT3fx9xL6c4ueDZ0xaXTKlazYE+eIKCevUNi+i5+Xt4drg508NnLwf15bcD2/6HjcxdKyivonxuZNHyeRSKRSyVOhE4tLyquq/07f9Kxso5Hr6u99MfFySlpGV3/v5MsZROTh5pJfWLznp9iCotJFz4QO6NO9+W8nPjk9Kub3J6eOUSkVrfg0AEAkziVcPnYmQfhrEE42VhYTRg3+Kfb0gSNxT4wZYmNtYTRyBcVlAb4eCanp5xMv+3i4GIzGwuLShNQMOxur/r26EpGfVydfz0ZG9kYP7Vtdo1VfL+A4Pikt6+F+3Ylo3IiBb74wKzu38GhcfFW1pqq6Wd/M8cnp1lbm6uv55xIum6kUDMOkNP3buqXicoz1h+82xhveO3ab2RDU0mE9fx8PIkq/lhPUxddUmH4tRyJhnR3tKquqm7kfu3ozRuxtrfMKi1vUDIFEwoY83PfQ0dNjQwbFnU986ekZQvkPEdHRPx9VKhVuLjdMdVMoGvnSP3kmfm3YViJyc3FqcIrI7q+xWgc7ayLKK/i7kdfzConom007TCXCsO+EMUMNBsOOfYc3/xjj7+Px+ovznB3tGm28nY1VWqa6V6CfqUSj1U4fP6z+IF5aptrOpuOn1gBAi7yxcFaDc071hQwO3nfoJM/zwwb1JqLCkjIiOnE28VxC3ap0KqWioqqmsLjMyvLvk0+21hal5ZUNduXj4Wpupjzyx4XuXXw4jhOujzx+JiFi72EisrI0b/Kk902EEN2257DwVKmQt+1a7CmFXE4l72bJ0E0rQTSlZeGkUipsbaz2/BRrCiejkdv381EfTzeGYeQyGREVFpUK542yrxe41pugUr85f2bn1RXyfPb1ghFD+t2mbhPvZWzIoF9iT0X/fJSIBvfrRUQVlVXRPx99ecGMkUP7E9H7677nm6pMRET/i4ge1LfnkoVzGIaJOXR80/b9ppfUOfnCucQsdS4RuXdyzs0vEl4SemBffvimMNtCbzDIpFIikkolk8eFzJg0Oie3YPmqsO17f1n0TGijxw3wdT9y8sL08cObaphGq7uUkj5+xMBbNB4A7jnhu36RsCzDMOG7fnl65jgne1uGYeZPG9u/dzci4jie4zmpROLh6nQ6PtVU63p+47/gBwYHHT9zqaSs0s3FQZhJsfvgsc4+7ov+MZVlmf2H/zgYe7r+9sKaTPlFpcI5p6KScuEXsLODrbur44LQ8cJmer1B1narNwU6sGHjFQtjdN0c2dUj5VaKZoVmi6eSv/7ivLMXkz/+ektiavqFhNQVn3yb+WfOK8/MJCKlUmFpYbb5x5jE1PTte365lp0rVDFTKojo9PlE07DpidPxx+MulpVXrt+8S1db27t7l6bqEpGFudmFxMuNzkT39XKzt7MO33Fg4EM9hGuShJArKa3QanVx5xPPxafc+u0oFYqq6prqGk2WOjcq+oYLFL7+4Uf19fw/s/M+/zbCNI1Q4OPpZmlhturLTYXFpcWl5f9874t31qwnouWrwt5eHVZeUcXzvMFgYJkmP94Rg/vwPEXFxJpK7Gyt7erNq4mKieV5wmwIgPtJ+rXr5xLSZk4ImTVpxNlLl9Ov5bAs4+PhGrH38NWsHI1W913E/iXvflWrNzzUs0uNRhu++9ey8qqDsadzCxoPp5FD+gjTxEMG1S0rI5NJazTaao0mU517+Pi5BturlAq5TLr74LFLKemR0b+ZRh0HBHc7l5B28myiVld75I8Li9/54mpWk1MBWsSUTMlF3M4Uw8IDup0pDa/SaVSLszEwwOetV5/etvPg8o++ISJ/H48Vy14QujtE9Opzsz/6YuPyj77x9/EI7tFVKFQqFRPHPrL5x5i484kf/ecVIhr4UPfPv4vU6w1mKqVp7KvRukQ0d9pjH3+95cVlH0V9t+rmydljhw/atuvg2JBBpmPNnTYufMeBbbsOKpUKU8NY5oapLuxfz55/csp7a7+b99LbRBTU1U+YgC4cZVC/XoveWkNEXu6uy5csMJUTkVQqWf324vfWfvfc0g+IyNXZYcnCOUT0wlPT3l2z/qlF7xCRt0en2VMfvcUnuXDuxHXfRTHETBs/jIgCfNyFco1WFxXze3xy+mvPTG/WvwQAxIFlGSK6uV/AMozw7bF+a7Srk/3D/XoQ0aHj58PCo9f8+4VFT0/9ZMP2td/+SEQsy86dPEouk/p5dZr86NC9v5w4eTZRKpH4e7uVlDUc1iMiGysLF0e7guKyAcF1s39nTRz5bcT+ZR+uJyJXJ/v8otIGVeZOGbMx6mBYeLSDnbVpEvmjwwcUlZRv23s4fPevRPRwvx7+3m5t8pmsHiUXkkl4+mtGc0cLmVuPet2CVquTSCSNdv20utqb14zQ1eqJSCGXPf3qisnjQsaNfLikrMLxppHZRutyHFdbq1c2e6aA3mAoLatwtLe9xZVGJjzPFxaX2lpb3fxeqms0HMdbWpg1WpGINFqd0Wi0ML9hg8qqGplU0pzWZucWhoVHMwz16uYf4OtORGkZ2fEpV3meFs7F8kUAHWbVVxHLXmr9gg6toDcYKqtqGpxm5nkqKauws7FqxjfZ3ziOLygutbOxusXC6o1+0/I8lZSV21pbsmwr1wRf9VXEBn5S6+oSUeykYmdnZ+Fx60cVb/Hl2+hqRg2WApJI2JuTqam6LMs2P5mISCaVOjk0PhPhZgzDNLWx+Y3zEm/W6My6W4RZA+6uju+/seDU+aSLyelph9VEZGdjNX7EQIzmATxoZFLpzROgGIZaseAQyzIuTUzFMmn0m5ZhqMFFux2oAxZ+HfhQD/QJ6hvYJwhpBABQXweE03PzJrf/QQEA4B6Cmw0CADQkk0pq9c2aVAYmtXoDsY0sQ9pMDaaYI5wAABrydndJSs3s6FbcY5JSM0ukTq2uPsDthjxCOAEANDS4X/cjJy9cSLiC/lNz1OoNFxKu/HL8QqwuoHV76OnEhgbdcJqp9VPJAQDuY3kFJSfPJGZl57XtQj73J1ZSInWK1QUU0e3vqNeAlYIZ4MaGBkmHe0nUarVpKjnCCQAARKF+OGFYDwAARAfhBAAAooNwAgAA0UE4AQCA6CCcAABAdBBOAAAgOq1ZW6+srKyqqkpXW4tp6AAA0GoMwyjkcgsLCxubhhdItSyc9Hp9fn6+TC63d3BQKhTNuVsSAABAo3ie1+p0FRUV2dnZpiucBC0Lp/z8fAtLSxtrsdzwAwAA7l0Mw6iUSpVSWVZenp+fX/+llp1zksnlSCYAAGhbNtbWMvkN9z9sWThZWbX4nowAAAC31SBfWhZOSkUL7pUOAADQTA3ypWXhhBkQAABwNzTIF1znBAAAooNwAgAA0UE4AQCA6CCcAABAdBBOAAAgOggnAAAQHYQTAACIDsIJAABEB+EEAACig3ACAADRQTgBAIDoIJwAAEB0EE4AACA6CCcAABCdlt2m/c6Vl5eXlpZqNBqe59v50AAA7YxlWY7jSLgfuUpVU1PTJrvliCG5ub+7k1KpbJMdilC7hlN+fn51dbWjo6OFuTnDotMGAA8Qo9F4ILl8b7rkSLbsDnelknCjO1UvqM309/W5X/Op/cKpvLy8urrax9sbsQQADyCJRDKhh52zPKdUY36xWH4nu9IY2Wi1JREtkBd09/dsowaKS/vlRGlpqaOjI5IJAB5kPTztFgSUt8mufr1uTrXVbbIrEWq/qNBoNBbm5u12OAAAEVKpVO5KTZvsSmNkWbpvT963XzjxPI9uEwAAy9y3idKGkBYAACA6CCcAABAdhBMAAIgOwgkAAESnvVeIAACAe8WHX4Zn5xYSkbur41svz23PQyOcAACAiGjzzp9PnU9u9KXs3MIX/72ufsnAPoFPTh179xqDYT0AACAiKi6tuEsbtwJ6TgAAIhXowK4aJZ+zW1eha49Lo157Zno7HKWZ7pNw+vXQb56eHl0COtcvTE5JvZ6bO2pESEe1CgDgToz2lQQ6sFsnK9onn8LCoy+lpDdzYwzrNcvmrduWvvmvBoWLl7wRuT2qQ9oDAHCHrBTMKF8JEQn5ZKVg7vYRF86d2MwtO/u439VkovsmnGZOn3oq7nR2To6pJCMj88LF+JnTp3VgqwAAWsdKwWydrAh0qPuKFvKpY5vUzkQUTjzPj584ZV/MgWeef/HhYSNXfLBSo9Gs+GDlsJFjFy95Iyk5hYiidu6aFjrHYDAIVdTZOeMnTjl77vyoESEWFhbR+2JMe9uzb7+FhcXwYY8QUfT+A5Onz3po4JBpoXOOnzgpbLD8vyvWf/u/15e91bPPAGHnAAAdyErB7AtVpr9sti9UuW+m0pRMKUXc+8dqlx2qbbeWvPXyXNPE8fqP33t9wZNTx7RPG0QUTkQUd+bsK6++3qtnj0kTHv/8y28GPDw8PT3zH/PnXYy/9Nbyd4ioZ48esb8fOxV3Wth+3/6YpJTUoMBuSqVy+tTJ26N2mna1NWL7k3NmyWTS/Qd+evrZhZ4e7steX2JuZv7EtNC8vHwiSrl8+d9vv1NaWvrG0lddXV064u0CAPytQscLI3eBDqy7Vd0gXkoRN3u37od4Q3IR124tcXd1dHd1bPC4s4+7va2Vna11+7RBdBMiXn7x+VdeeoGIkpJTfj92/Lv1X8tkUg8P95mznywuLu4S0Llnj+57ovcPeXgwEW2P2jlj2hSVSkVE06dO+WHTltTLaV27BMRfSrh27c9pUycTUb+HHtq66X9jx4wiojGjR8b8dDD+UoKLizMRDRzQ//sN33TkuwUAqGf2bt22yYpuf/WZcir52e01VU9sxNVzIqIeQUHCA08P9+DevWQyKRH5ensTUUlpGRHNnR26Y9eeWr3+ytX0pOSUGdOmCNv369vHy8tTGNnbE71fiDEicnZ28vT0EEbwQufMJ6Ky8ro7ffUJ7t3O7w4A4BYqdPx7x/Smp9kV/IOZTCTCcGKY28xImTRhfFVV1dFjx/fu2+/l5flQn2BTxdmhM8K3RRoMhojtUXNmzRTKt4RvGxoyel/MAWtrq/nz5tTfFYv7SwGAmAQ6sGtGyWfv1qUUcUQ0wO3B/Y669965vb39Y4+O2bV7b8T2qPlz59QPs6lPTLqem7vu8y+LioomP1E3J3Lz1ohZM6fv37Nj+Vv/fHzcYx3UagCA2wh0YMPGKxbG6OJyjEI+xeW033kmsRHdOafmmDVz+pP/eJaIpky+YVa+t7fXgH59V61ZO2L4MFeXujkOvr4+5y9cTE5Jlclkq9Z80gHNBQC4HVMyCRMfKnT87N06qwdr9vgNxNtzunl8z1QwMmS4hYXF8GFD3d3cGmwze9ZMIgqd8fflTW8sWWwwGB8ZMWbQ0BCVSmVhYXEXGw0A0CqrR8lNySSo0PHZFQ/oCScSVc+JYZii3D9NT1e8s9z02MfHu/5LlZWVVVVV9RPIZM6smaazTQJ/P7+4E7F5efkqM5W1ldUXn9Z1nnZEbm3b9gMAtNrjkdqOboK4iCicmilie1Tkjzs6ubq26ASSMHccAABuS7iHU4PHVzKzi0srsnML2qcN91g4abXa/23c7OLiHLl1k1Kp7OjmAADchz78MrzRx8s//r7d2nCPhZNSqfz1p30d3QoAALi7xDshAgAA2lnPbn7N2cy0uNHdc4/1nAAA4O5p/l0z7jb0nAAAQHQQTgAAIDrtF04Mw/Dcg7sUBwCAgOPv+j1t7wPtF04qlaqqurrdDgcAIEIajSZbq2qTXakkHEf3bc61XzjZ2toWFhai8wQAD7KEP0u+T2ub+/WN7lRNcvM22ZUItV84WVtbm5ubZ2ZlVVZWIqIA4EFjNBr3JZRsSLG4WCy/w12pJNxEj8pnOxf7uzu1SdtEiOH5dl1YsLy8vLS0VKPRtPNxAQA6EMMwKpWqpqamTfbGEUNyc393p/tsoRy1Wu3sXLfUXHtf52RtbW1t3U63oAcAgHsUppIDAIDoIJwAAEB0EE4AACA6CCcAABAdhBMAAIgOwgkAAEQH4QQAAKKDcAIAANFBOAEAgOggnAAAQHTuyXAq0fCLf9adUBub2iCjlFv8s6755QAAICr3ZDjtTDXsv2Jce0rf1AaFNfz+K41EV1PlAAAgKqILpyNZxhFbNLfeJiLREOjIXszn8qtvWNq8Rk9HsowJBQ3vx9FUOQAAiFN7r0p+W7VGKrllNl0p4a6V8wdmKWbu1O1IMbzUVyaUH8o0Ph+jU0hIZ6TuTn+HblPlAAAgWiL6sj5w1RiZZNicYKis5SOTDJFJhquljfR1tiUaOlkyXezZad0k2xINQmFVLf/iT7oFvaWJC80uPKsq+KtH1VQ5AACImYjCKSLR8NVZ/alsIxF9dVb/1Vn95aKGWcLxtCPFEBooJaIZgdK8Kj65kCOihALOyNGbg+UsQ1YKZlG/uu5UU+UAACBmIhrW2/KEgoh+TjcuO1x7bL6q0W1OqI01evrsjH7Tpbo+0+o/9BsnKq6V82Yykv4VtS4WjPCgqXIAABAzEYVTcwjjeOtGK4Sn6+JqT2YbjTx1sWdr9FSm5W2UDBGlFteNBzZVDgAAYiaiYT1Bbxf249HyRl+q0dPhLOM7w+TjO0uEvy1PKI0cxWYZgxxZSznzysHanEr+zHXui9N1s8ybKgcAADETXTg5mzOjfCSNvnQw3WDkaGLA36+6WjDdHNjIJINcQtumKK6Wco9s0oTu0s4IrOsRNlUOAABixvD8fTWBrVjDWysY6U2Z21Q5AACIhFqtdnZ2Fh7fbz0Je1XjUx6aKgcAABFCVwIAAEQH4QQAAKKDcAIAANFBOAEAgOggnAAAQHQQTgAAIDoIJwAAEB2EEwAAiA7CCQAARAfhBAAAooNwAgAA0UE4AQCA6Pwf1fn7jEtzRZAAAAAASUVORK5CYII=" width="564" height="139" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="image-pull-policy">Image Pull Policy<a class="hash-link" href="#image-pull-policy" title="Direct link to heading">​</a></h3><p>This is where you make the choice to set the pull policy for the image.</p><ul><li><p><strong>Always:</strong> The kubelet queries the container image registry to resolve the name to an image digest every time the kubelet launches a container. If the kubelet encounters an exact digest cached locally, it uses its cached image; otherwise, the kubelet downloads (pulls) the image with the resolved digest, and uses that image to launch the container.</p></li><li><p><strong>If Not Present:</strong> The image is pulled only if it isn&#x27;t already present locally.</p></li><li><p><strong>Never:</strong> The kubelet assumes that the image exists locally and doesn&#x27;t try to pull the image.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="container-resources">Container Resources<a class="hash-link" href="#container-resources" title="Direct link to heading">​</a></h3><p>The container resources configuration specifies the maximum resources used by the container at runtime.</p><p><strong>Limit Memory</strong>
Maximum memory that the container can use. You can express memory as a plain integer or as a fixed-point number using the suffixes G or M. You can also use the power-of-two equivalents Gi and Mi.</p><p><strong>Limit CPU</strong>
The maximum number of cores that the container can use. CPU limits are measured in cpu units. Fractional requests are allowed: you can specify one hundred millicpu as 0.1 or 100m. </p><p><strong><a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes" target="_blank" rel="noopener noreferrer">See Resource units in Kubernetes</a></strong></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is not applicable in case you have opted for Hosted by Harness in your Infrastructure settings of the step.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timeout">Timeout<a class="hash-link" href="#timeout" title="Direct link to heading">​</a></h3><p>This specifies the timeframe until which the step shall execute. Once the timeout is reached the step fails and the Pipeline execution continues.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="not-able-to-troubleshoot-the-encountered-error">NOT ABLE TO TROUBLESHOOT THE ENCOUNTERED ERROR<a class="hash-link" href="#not-able-to-troubleshoot-the-encountered-error" title="Direct link to heading">​</a></h3><p>In case the user is unable to troubleshoot the application error or pipeline execution failures the user can log/submit a ticket to Harness Support. To log a ticket follow the process:</p><ol><li>Click the <strong>Help</strong> button in the Harness Manager</li><li>Click <strong>Submit a Ticket</strong> or <strong>Send Screenshot</strong></li><li>Fill out the pop up form and click <strong>Submit Ticket</strong> or <strong>Send Feedback</strong></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/continuous-integration">continuous-integration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/harness-ci">harness-ci</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/troubleshooting-guide">troubleshooting-guide</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cme">cme</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/troubleshooting-harness-ci">Troubleshooting Guide: Harness CI</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-11T00:00:00.000Z" itemprop="datePublished">October 11, 2022</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://media-exp1.licdn.com/dms/image/C5603AQFvCMGToV9LMQ/profile-displayphoto-shrink_800_800/0/1631719718974?e=1670457600&amp;v=beta&amp;t=vWbeVBiAvAYLTdxYcAnIqzuvveJ8IWleCDV0A5Fdbp0" alt="Dhrubajyoti Chakraborty"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dhrubajyoti Chakraborty</span></a></div><small class="avatar__subtitle" itemprop="description">Community Engineering Intern, Harness</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>This is a guide to get started with the common use cases for the end users to implement pipeline executions successfully in Harness CI</p><p>Harness provides various sources &amp; tools to easily troubleshoot frequently encountered errors to fix pipeline failures. This guide lists some of the common issues faced while implementing and designing pipelines in Harness CI and the possible solutions.</p><p><strong>What’ll we be covering here?</strong></p><ul><li>Syntax Verification</li><li>Variable Verification</li><li>Troubleshooting Delegate Installation Errors</li><li>Troubleshooting Triggers Errors</li><li>Troubleshooting Git Experience Errors</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-syntax">Verify Syntax<a class="hash-link" href="#verify-syntax" title="Direct link to heading">​</a></h3><p>An early-stage error use case is generally incorrect syntax. In such cases, the pipeline returns an invalid YAML syntax message and does not start running in case any syntax error is detected.</p><p>Edit <code>pipeline.yaml</code> in the pipeline studio</p><p>The pipeline editor in the YAML view is recommended for editing experience (rather than the graphical stage view). Major features in the editor include:</p><ul><li>Creation of connectors, secrets &amp; pipelines from scratch</li><li>Realtime schema validation</li><li>Intellisense &amp; auto-completion</li><li>Field descriptions &amp; rich inline documentation</li><li>Free Templates for YAML Samples </li></ul><p>This feature helps the developer to validate the existing pipeline’s correctness and helps in quick modification alongside copying of a pipeline as a code.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-variables">Verify Variables<a class="hash-link" href="#verify-variables" title="Direct link to heading">​</a></h3><p>A very integral part of troubleshooting errors in Harness CI is to verify the variables present in the pipeline and their values. Major configuration in the pipeline depends on the variables and verifying them becomes the easiest way to reach the root cause and potential solution of the problem.</p><p>Visit the variables section on the Harness CI platform. Check if the expected variables and their values match and are implemented at the expected stage for the pipeline.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delegate-setup-failure">Delegate Setup Failure<a class="hash-link" href="#delegate-setup-failure" title="Direct link to heading">​</a></h3><p>The majority of the encountered errors in Harness CI revolve around delegate setup processes. Make sure you have a complete understanding of how to set up a harness delegate from scratch &amp; understand how the Harness manager and delegate complement each other.</p><p>Delegate setup also fails if the SSH key used for deployment to the targeted host is incorrect. This usually happens due to incorrect information about the SSH configuration in the Harness Secrets Management and also if the targeted host is not configured to support SSH connections.</p><p>For troubleshooting move to the <code>watcher.log</code> file that provides information about the deleted version.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delegate-fails-to-establish-a-connection-with-the-harness-manager">Delegate fails to establish a connection with the Harness Manager<a class="hash-link" href="#delegate-fails-to-establish-a-connection-with-the-harness-manager" title="Direct link to heading">​</a></h3><p>In case of connection failures for the delegate with the Harness Manager, we can use ping on the delegate host to test the response time for app.harness.io and other URLs are consistent or not. We can use the traceroute to check the network route and verify if there is any case of redirection. To verify if the DNS resolution is working fine we can implement nslookup.
We can flush the client&#x27;s DNS cache (Check for the OS). We can run tests to check for local network errors or NAT license limits. In the case of cloud service providers, we’ll have to ensure that the security groups have outbound traffic allowed on HTTP 443.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-eligible-delegate-found-for-the-assigned-pipeline-execution">No eligible delegate found for the assigned pipeline execution<a class="hash-link" href="#no-eligible-delegate-found-for-the-assigned-pipeline-execution" title="Direct link to heading">​</a></h3><p>This error is encountered when the delegate fails to achieve the URL criteria for validation. All delegates in harness are identified by their Harness account ID with some additional factors. For example, in VMs the delegates are identified with the combination of their hostname and IP address thus in case the IP changes the Harness Manager fails to identify the delegate. In the case of K8s and ECS delegates, the IP changes when the pod is rescheduled.</p><p>The delegate sends the heartbeat, deployment data &amp; Time series, and log data for continuous verification to the Harness Manager. The credentials used by the Delegate must have the roles and permissions required to perform the task. For example, if the account used for an AWS Cloud Provider does not have the roles required for ECS deployments then it will fail.</p><p>For more information visit <a href="https://docs.harness.io/article/migeq3achl-harness-delegate-faqs#how_does_harness_manager_identify_delegates" target="_blank" rel="noopener noreferrer">How does Harness Manager Identify Delegates?</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-delegate-deletion-failure">K8s Delegate Deletion Failure<a class="hash-link" href="#k8s-delegate-deletion-failure" title="Direct link to heading">​</a></h3><p>To delete the Harness Delegate from the K8s cluster we’ll have to delete the StateFulSet for the delegate. This ensures that the expected number of pods is running and available. Deletion of the delegate without deletion of the StateFulSet results in a recreation of the pod. </p><p>For example, if the delegate name is <code>delegate-sample</code> then we can delete StateFulSet with the command below</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete statefulset -n harness-delegate delegate-sample</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="triggers-rejection-failures">Triggers Rejection Failures<a class="hash-link" href="#triggers-rejection-failures" title="Direct link to heading">​</a></h3><p>This usually happens when the user uses a webhook trigger to execute a pipeline or workflow and the name of the artifact in the cURL command is different from the name of the artifact.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Trigger Rejected. Reason: Artifacts Are Missing </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> Service Name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is majorly a result of a bad name for an artifact build version when placed in the cURL command. For example a cURL with build number <strong>v1.0.4-RC8:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:#e3116c">&#x27;content-type: application/json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--url https://app.harness.io/gateway/api/webhooks/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d </span><span class="token string" style="color:#e3116c">&#x27;{&quot;application&quot;:&quot;tavXGH . . z7POg&quot;,&quot;artifacts&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{&quot;service&quot;:&quot;app&quot;,&quot;buildNumber&quot;:&quot;v1.0.4-RC8&quot;}]}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In case the Harness Service artifacts have a different nomenclature the cURL command will fail to execute. Thus ensuring the webhook cURL command has the correct artifact name becomes very important. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="failure-when-executed-git-push-in-harness">Failure when executed Git Push in Harness<a class="hash-link" href="#failure-when-executed-git-push-in-harness" title="Direct link to heading">​</a></h3><p>In case of two-way sync between the Git repository and the Harness Application, the push to Harness will result in failure unless the GIT YAML files and the required settings are configured before pushing the app to Harness.</p><p>For example, in case we have a predefined infrastructure definition and the required labels or parameters are not filled or filled in incorrectly the push to git is more likely to encounter a failure.</p><p>Using the Harness Manager to configure the app at first is the best way to encounter this error. This generally ensures that all the required settings are configured correctly and synced with the git repository. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="triggers-zsh-no-matches-found">Triggers: zsh: no matches found<a class="hash-link" href="#triggers-zsh-no-matches-found" title="Direct link to heading">​</a></h3><p>In some of the OS versions specifically in MACOS, the default shell is zsh. The zsh shell requires the cURL command to not use the “?” character or put quotes around the URL.</p><p>For example;</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:#e3116c">&#x27;content-type: application/json&#x27;</span><span class="token plain"> --url https://app.harness.io/gateway/api/webhooks/xxx?accountId</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">xxx -d </span><span class="token string" style="color:#e3116c">&#x27;{&quot;application&quot;:&quot;fCLnFhwsTryU-HEdKDVZ1g&quot;,&quot;parameters&quot;:{&quot;Environment&quot;:&quot;K8sv2&quot;,&quot;test&quot;:&quot;foo&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This shall work</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:#e3116c">&#x27;content-type: application/json&#x27;</span><span class="token plain"> --url </span><span class="token string" style="color:#e3116c">&quot;https://app.harness.io/gateway/api/webhooks/xxx?accountId=xxx -d &#x27;{&quot;</span><span class="token plain">application</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token plain">fCLnFhwsTryU-HEdKDVZ1g</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token plain">parameters</span><span class="token string" style="color:#e3116c">&quot;:{&quot;</span><span class="token plain">Environment</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token plain">K8sv2</span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token builtin class-name">test</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token plain">foo</span><span class="token string" style="color:#e3116c">&quot;}}&#x27;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-does-not-have-deployment-execute-permission">User does not have &quot;Deployment: execute&quot; permission<a class="hash-link" href="#user-does-not-have-deployment-execute-permission" title="Direct link to heading">​</a></h3><p>The error User does not have <code>&quot;Deployment: execute&quot;</code> permission reflects back to the user’s <strong>Application Permission &gt; Settings</strong> does not involve <code>execute</code>. This can be solved by resolving the application permission configuration. The user can easily modify the Harness Configure as Code YAML files for the harness application. </p><p>To enable editing of the YAML file make sure the user’s Harness User Groups must have the account permission <code>Manage Applications</code> enabled. Also the Application Permissions <code>Update</code> enabled for specific applications</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="not-able-to-troubleshoot-the-encountered-error">NOT ABLE TO TROUBLESHOOT THE ENCOUNTERED ERROR<a class="hash-link" href="#not-able-to-troubleshoot-the-encountered-error" title="Direct link to heading">​</a></h3><p>In case the user is unable to troubleshoot the application error or pipeline execution failures the user can log/submit a ticket to Harness Support. To log a ticket follow the process:</p><ol><li>Click the <strong>Help</strong> button in the Harness Manager</li><li>Click <strong>Submit a Ticket</strong> or <strong>Send Screenshot</strong></li><li>Fill out the pop up form and click <strong>Submit Ticket</strong> or <strong>Send Feedback</strong></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/continuous-integration">continuous-integration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/harness-ci">harness-ci</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/troubleshooting-guide">troubleshooting-guide</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cme">cme</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/harness-ci-onboarding">Harness CI Onboarding - Beginners Guide</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-05T00:00:00.000Z" itemprop="datePublished">October 5, 2022</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://media-exp1.licdn.com/dms/image/C5603AQFvCMGToV9LMQ/profile-displayphoto-shrink_800_800/0/1631719718974?e=1670457600&amp;v=beta&amp;t=vWbeVBiAvAYLTdxYcAnIqzuvveJ8IWleCDV0A5Fdbp0" alt="Dhrubajyoti Chakraborty"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/codewdhruv" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dhrubajyoti Chakraborty</span></a></div><small class="avatar__subtitle" itemprop="description">Community Engineering Intern, Harness</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>This beginner guide aims to help learners learn about the basic components of Harness CI and develop an understanding of the DevOps ecosystem involved in the Software Development lifecycle. In this article we will learn about the basic features of Harness CIE and also get started by building the first basic sample pipeline.</p><p>Engineering team is usually expected to deliver error-free code at high frequency. A fast and reliable CI/CD pipeline is a major part for implementation of that in a sustainable model over time. Harness Continuous Integration tool which is built with test intelligence, native secrets, fine-grained RBAC, and extensible governance  as one of the best solutions in the marketplace for automated pipelines. Automated pipelines remove user errors, provide feedback loops to developers and helps enable fast product iterations.</p><p><strong>What is a pipeline?</strong></p><p>A Pipeline is an end-to-end process that delivers a new version of your software. It can be considered to be a cyclical process that includes integration, delivery, operations, testing, deployment, real-time updates, and metrics monitoring.</p><p>For example: A pipeline can use the CI module of Harness to build, test &amp; push code and then also a CD module to deploy the artifact to the production environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><ul><li>Github Account (<a href="https://docs.harness.io/article/kqik8km5eb-source-code-manager-settings#source-code-manager-settings" target="_blank" rel="noopener noreferrer">Check out the other source code managers here</a>)</li><li>Docker Hub Account &amp; Repository (<a href="https://docs.harness.io/article/66ykcm0sf0-build-and-push-to-gcr-step-settings" target="_blank" rel="noopener noreferrer">Other artifactory packages</a>)</li><li>Installation of K8s Delegate for Harness Delegate</li><li>About Harness CI</li><li>Features in Harness CI</li><li>Getting Started with your first pipeline</li><li>Troubleshooting frequently encountered issues</li><li>Conclusion: Developer Feedback on Harness CIE</li><li>What’s Next?</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment">Environment<a class="hash-link" href="#environment" title="Direct link to heading">​</a></h3><ul><li>Ubuntu 20.04/22.04</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><ul><li>Kubernetes cluster for Harness Delegate and build farm.</li><li>You&#x27;ll need a Kubernetes cluster for Harness to use for the Harness Delegate and as a build farm. Ensure you have a cluster that meets the following requirements:</li><li>Number of pods: 3 (two pods for the Harness Delegate, the remaining pod for the build farm).</li><li>Machine type: <code>4vCPU</code></li><li>Memory: 16GB RAM. The build farm and Delegate requirements are low but the remaining memory is for Kubernetes, the Docker container, and other default services.</li><li>Networking: Outbound <code>HTTPS</code> for the Harness connection, and to connect to Docker Hub. Allow TCP port 22 for SSH.</li><li>Namespace: When you install the <code>Harness Delegate</code>, it will create the <code>harness-delegate</code> namespace. You&#x27;ll use the same namespace for the build farm.</li></ul><p>A <strong>Kubernetes service account</strong> with permission to create entities in the target namespace is required. The set of permissions should include <code>list</code>, <code>get</code>, <code>create</code>, and <code>delete</code> permissions. In general, the cluster-admin permission or namespace admin permission is enough.
For more information see <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/#user-facing-roles" target="_blank" rel="noopener noreferrer">User-Facing Roles</a> from Kubernetes.</p><p>This tutorial implements creation of a pipeline over a github repository thus you’ll be required to create a github account &amp; host a project over a repository. To create a new repository on github follow these steps:</p><ol><li>Move to the upper-right corner on the github webapp &amp; use the  drop-down menu to select New repository option.</li></ol><p><img loading="lazy" alt="create-new-repository" src="/assets/images/repo-create-ba4bc7a2ad541270d85b12a1b30d61da.png" width="192" height="201" class="img_ev3q"></p><ol start="2"><li>Type the name of the repository. The repository name is unique &amp; cannot be same as already hosted repo names.</li></ol><p><img loading="lazy" alt="repo-name" src="/assets/images/create-repository-desc-d047c18e7b4c9821faa90fdc826b9dd4.png" width="808" height="335" class="img_ev3q"></p><ol start="3"><li>Select the repository visibility &amp; click on create repository.</li></ol><p><img loading="lazy" alt="repo-public" src="/assets/images/create-repository-public-private-aa8d0703e0ada95178c150a84eb7b64e.png" width="750" height="302" class="img_ev3q"></p><p><img loading="lazy" alt="create-repo" src="/assets/images/repo-create-ba4bc7a2ad541270d85b12a1b30d61da.png" width="192" height="201" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-docker-engine">Installing Docker Engine<a class="hash-link" href="#installing-docker-engine" title="Direct link to heading">​</a></h3><p>To get started with Docker Engine make sure you meet the <a href="https://docs.docker.com/engine/install/ubuntu/#prerequisites" target="_blank" rel="noopener noreferrer">prerequisites</a> then install Docker. Older versions of Docker were called <code>docker</code>, <code>docker.io</code>, or <code>docker-engine</code>. If these are installed uninstall them with this command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> remove </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> docker-engine docker.io containerd runc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Check out this documentation to get your Docker Engine installed</a></strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-of-k8s-delegate-for-harness-delegate">Installation of K8s Delegate for Harness Delegate<a class="hash-link" href="#installation-of-k8s-delegate-for-harness-delegate" title="Direct link to heading">​</a></h3><p>Harness Delegate is the service that connects all the components of the pipeline i.e artifact, infrastructure, collaboration, verification and other providers with the Harness Manager. It performs all the operations in the deployment lifecycle. Here we’ll install Kubernetes Delegate.</p><ol><li>Move to the Harness Platform, in the Manager section click on setup and select Delegates.</li><li>In the delegates tab, click on the install delegate option with preference to Kubernetes YAML as the download type.</li><li>Update the name and profile and download the K8s Delegate or copy the download link.</li><li>Navigate to the harness-delegate-kubernetes folder that you extracted in the terminal using the following command</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -zxvf harness-delegate-kubernetes.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> harness-delegate-kubernetes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this you will directly connect with your cluster from the terminal and thus can easily copy the YAML file over.</p><ol start="5"><li>To verify the connection of your created K8s Delegate with the Harness Platform use the following command</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -p https://app.harness.io/ -O /dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>Now we’ll install the harness delegate using the <code>harness-delegate.yaml</code> file using this command</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f harness-delegate.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>To verify that the delegate pod was created run the following command.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n harness-delegate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With this now you&#x27;re ready to connect Harness to your artifact servers, clusters, and so on.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-harness-ci">About Harness CI<a class="hash-link" href="#about-harness-ci" title="Direct link to heading">​</a></h3><p>Harness CI is powered by Drone the most popular open source CI tool. It’s built for speed and developer experience. Onboarding it is simple and this is what this guide is about.</p><p>Harness alongside the open source counterpart Drone introduced new features to scale the developer onboarding experience and reduce the time involved in the process drastically as compared to the industry standards.</p><p><strong>Harness CI’s major features are the following:</strong></p><ol><li>Containerized Steps (Zero Dependencies)</li><li>Visual Pipeline Builder with YAML Config as Code</li><li>Git Operations, Secrets &amp; Fine grained RBAC for security etc</li><li>Test Intelligence</li><li>Integrated Platform</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started-with-your-first-pipeline">Getting Started with your first pipeline<a class="hash-link" href="#getting-started-with-your-first-pipeline" title="Direct link to heading">​</a></h3><p>Pipelines are a group of one or more stages. They are responsible for managing and automating builds, testing, deployments, and other important build and release stages.</p><p>To create a new Pipeline in Harness CI follow the steps below:</p><ol><li>Move to the Harness Platform, click on projects. Create a new project incase you haven’t already created one.</li><li>Move to the modules section and click on Continuous Integration &amp; click on create a new pipeline.</li><li>Enter the name for the pipeline &amp; click on start. It usually takes 2-4 min for the provisioning stage of the pipeline.</li></ol><div class="iframe-wrapper"><iframe src="https://www.youtube.com/embed/251WU_OG0BI" frameborder="0" allow="autoplay; encrypted-media"></iframe></div><p>The backbone of the pipeline is the build stage. This is where the user specifies the pipeline configuration details as the codebase to build, the infrastructure, the build workflow and all other additional components. The next step involves establishing the connection of the pipeline with the external resource. We use a <code>connector</code> in Harness CIE to develop this pipeline connection. The <code>connector</code> is a configurable object that automatically establishes connection to an external resource. </p><p>To create the Build Stage follow the steps given below: </p><ol><li><p>Move to the newly created pipeline in the Pipeline Studio, add a stage &amp; select build.</p></li><li><p>Add a stage name &amp; under the configure codebase select connect connector.</p></li><li><p>Click on New Creator &amp; give preference to Github Connector from all the available options for connector type. </p></li></ol><p>To configure the connector successfully provide the following details i.e
a. URL Type as a Repository
b. Connection Type as HTTP
c. GitHub Repository URL</p><p>You’ll also have to verify the github username &amp; PAT’s to make use of the connector. These secrets are stored in the Harness Secret Manager. </p><ol start="4"><li><p>Once the connector has been configured with the necessary credentials select Enable API Access.</p></li><li><p>The connectivity medium can be directly through Harness Platform or through an delegate service running in an external resource. </p></li><li><p>In this guide we’ll install the delegate into the K8s cluster. Select Connect Through An Harness Delegate from the available options.</p></li><li><p>Install the new delegate with infrastructure type as Kubernetes.</p></li><li><p>Configure the delegate information as Name, Size, Permissions etc &amp; install the delegate using the workspace definition YAML file that can be installed directly to the build infrastructure.</p></li><li><p>Download the YAML script and run it on the previously created cluster from the terminal.</p></li><li><p>Login to the K8s cluster from the same terminal and click on connect option.</p></li><li><p>Install the Harness Delegate using the <code>harness-delegate.yaml</code> file using the following command.</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f harness-delegate.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="12"><li><p>Set up the Delegate with the necessary configuration from the Delegate Setup option.</p></li><li><p>Once the delegate is setup successfully you’ll see the connector &amp; repo details in the About your stage component.</p></li><li><p>Select on setup stage and the new stage will be added to the pipeline.</p></li></ol><p>The next step is to set up &amp; define the Build Farm Infrastructure under the pipeline configuration settings. To setup the BFI follow the steps below:</p><ol><li>Select the newly created K8s cluster &amp; create a new connector. Specify details as Name, Details, Delegates Setup &amp; Connection Test.</li><li>Once verified click on Finish to add the new connector to the K8s Cluster Field.</li><li>Verify the namespace carefully and move to the Execution component of the pipeline.</li></ol><p>Now we can build &amp; run tests over &amp; against the hosted code. Move to the Execution Tab of the pipeline &amp; add the step to run the steps. Follow the following steps to setup the Execution workflow of the pipeline:</p><ol><li><p>Add a run step to the pipeline &amp; configure it as follows: </p><ul><li>Give the step an appropriate name</li><li>Click on add a new connector option under the container registry option.</li><li>Select the connector type as Docker Registry</li></ul></li><li><p>We’ll now create a new connector to the DockerHub account. Specify the account credentials and configure the secrets.</p></li></ol><p><img loading="lazy" alt="docker-img" src="/assets/images/ci-tut-04-docker-connector-02-details-694e13ae74e3e5c8cb93f30da56c6471.png" width="583" height="437" class="img_ev3q"></p><ol start="3"><li>Verify the connection test &amp; once successful click on Finish. Now we can Configure Run Step pane, with the new Connector in the Container Registry setting.
Configure the step as follows:</li></ol><ul><li>Give an appropriate step name.</li><li>The Container Registry should show the Docker Hub Connector you just created.</li><li>Image: <code>golang:1.15</code></li><li>Command:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go get gotest.tools/gotestsum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gotestsum --format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">standard-verbose --junitfile unit-tests.xml </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CGO_ENABLED</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">GOOS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">linux </span><span class="token assign-left variable" style="color:#36acaa">GOARCH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amd64 go build -a -tags netgo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The last line contains the go build command to compile the package, along with its dependencies. Once configured click on Apply changes &amp; save the pipeline.</p><p>Now we can add the step to build &amp; push the created image into the DockerHub repository. A repository in DockerHub is required to receive the artifacts from the pipeline. Add a step and specify the DockerHub account credentials. </p><p>Configure the step as follows:</p><ul><li>Select Name as the Step name you defined earlier.</li><li>Select the Docker Hub Connector you set up previously.</li><li>Paste the docker repository URL &amp; specify the tags: <code>&lt;+pipeline.sequenceId&gt;</code></li><li>After successfully configuring the step components select Apply Changes &amp; save the pipeline.</li></ul><p>The pipeline is now ready for execution &amp; can be used for running tests.
You can also add the Integration Tests to the pipeline. To execute the pipeline click on Run. Select Git Branch and the git branch name when prompted such as main and click on Run Pipeline</p><p>You can view the logs of each step by clicking on it or else can also switch to the console view for more tracking down the micro details.
The entire pipeline is also available in YAML. You can directly make changes to the YAML file and save the changes and it will automatically be reflected in the pipeline when executed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion---developer-feedback-on-harness-cie">Conclusion - Developer Feedback on Harness CIE<a class="hash-link" href="#conclusion---developer-feedback-on-harness-cie" title="Direct link to heading">​</a></h3><p>Developers spend a lot of time into coding &amp; solving the engineering problems. With Harness CIE we can now easily cut down the operational &amp; functional time cost drastically. The added advantage to the features of CIE is the User Interface of CIE which is sleek and easy
&amp; solves major issues of longer build and testing time. Harness CIE automatically scales up the build, test and deploy cycles. </p><p>The product focuses on developers &amp; is completely developer-centric built around what a developer seeks to be the one stop solution for CI/CD.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/continuous-integration">continuous-integration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/harness-ci">harness-ci</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/beginners-guide">beginners-guide</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/getting-started">getting-started</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cme">cme</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">QUICK LINKS</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://harness.io/products/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">Harness Platform Overview<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fast.wistia.net/embed/channel/qauwxlogqz?wvideo=rd23ssxq3k&amp;wchannelid=qauwxlogqz&amp;wmediaid=rd23ssxq3k" target="_blank" rel="noopener noreferrer" class="footer__link-item">Watch Overview Video<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.harness.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://harness.io/company/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">COMMUNITY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://harnesscommunity.slack.com/join/shared_invite/zt-y4hdqh7p-RVuEQyIl5Hcx4Ck8VCvzBw#/shared-invite/email" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join us on Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.harness.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Upcoming Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.meetup.com/harness-india/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Harness on Meetup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.harness.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">MORE ON THIS SITE</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">COMPANY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://harness.io/company/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://harness.io/company/press-and-news" target="_blank" rel="noopener noreferrer" class="footer__link-item">Press &amp; News<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://harness.io/legal/trademark" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://harness.io/legal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://harness.io/security" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Harness, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.37462c87.js"></script>
<script src="/assets/js/main.428e0575.js"></script>
</body>
</html>